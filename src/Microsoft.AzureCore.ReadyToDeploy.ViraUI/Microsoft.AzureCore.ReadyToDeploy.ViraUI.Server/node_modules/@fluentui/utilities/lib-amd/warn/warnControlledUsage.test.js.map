{"version":3,"file":"warnControlledUsage.test.js","sourceRoot":"../src/","sources":["warn/warnControlledUsage.test.ts"],"names":[],"mappings":"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","sourcesContent":["import { setWarningCallback } from './warn';\nimport { warnControlledUsage, resetControlledWarnings } from './warnControlledUsage';\nimport type { IWarnControlledUsageParams } from './warnControlledUsage';\n\nconst warningCallback = jest.fn();\n\nconst noOp = () => undefined;\n\ninterface IProps {\n  value?: string;\n  defaultValue?: string;\n  onChange?: Function;\n  readOnly?: boolean;\n}\n\nconst params: Omit<IWarnControlledUsageParams<IProps>, 'props'> = {\n  componentId: 'TestComponent1',\n  componentName: 'TestComponent',\n  valueProp: 'value',\n  defaultValueProp: 'defaultValue',\n  onChangeProp: 'onChange',\n  readOnlyProp: 'readOnly',\n};\n\ndescribe('warnControlledUsage', () => {\n  beforeEach(() => {\n    setWarningCallback(warningCallback);\n  });\n\n  afterEach(() => {\n    warningCallback.mockReset();\n    setWarningCallback(undefined);\n    resetControlledWarnings();\n  });\n\n  it('does not warn or throw if old props are undefined', () => {\n    warnControlledUsage<IProps>({ ...params, props: {} });\n    expect(warningCallback).toHaveBeenCalledTimes(0);\n\n    // If oldProps was defined, this would be an error for switching from uncontrolled to controlled\n    warnControlledUsage<IProps>({ ...params, props: { value: 'test', onChange: noOp } });\n    expect(warningCallback).toHaveBeenCalledTimes(0);\n  });\n\n  it('does not warn if uncontrolled regardless of if onChange/readOnly is provided', () => {\n    warnControlledUsage<IProps>({ ...params, props: { defaultValue: 'test' } });\n    expect(warningCallback).toHaveBeenCalledTimes(0);\n\n    warnControlledUsage<IProps>({ ...params, props: {} });\n    expect(warningCallback).toHaveBeenCalledTimes(0);\n\n    warnControlledUsage<IProps>({ ...params, props: { defaultValue: 'test', onChange: noOp } });\n    expect(warningCallback).toHaveBeenCalledTimes(0);\n\n    warnControlledUsage<IProps>({ ...params, props: { onChange: noOp } });\n    expect(warningCallback).toHaveBeenCalledTimes(0);\n\n    warnControlledUsage<IProps>({ ...params, props: { defaultValue: 'test', readOnly: true } });\n    expect(warningCallback).toHaveBeenCalledTimes(0);\n\n    warnControlledUsage<IProps>({ ...params, props: { readOnly: true } });\n    expect(warningCallback).toHaveBeenCalledTimes(0);\n  });\n\n  it('does not warn if controlled and onChange is provided', () => {\n    warnControlledUsage<IProps>({ ...params, props: { value: 'test', onChange: noOp } });\n    expect(warningCallback).toHaveBeenCalledTimes(0);\n  });\n\n  it('does not warn if controlled and readOnly is true', () => {\n    warnControlledUsage<IProps>({ ...params, props: { value: 'test', readOnly: true } });\n    expect(warningCallback).toHaveBeenCalledTimes(0);\n  });\n\n  it('warns if controlled and onChange/readOnly is not provided', () => {\n    warnControlledUsage<IProps>({ ...params, props: { value: 'test' } });\n    expect(warningCallback).toHaveBeenCalledTimes(1);\n    expect(warningCallback).toHaveBeenLastCalledWith(\n      `Warning: You provided a 'value' prop to a TestComponent without an 'onChange' handler. This will render a ` +\n        `read-only field. If the field should be mutable use 'defaultValue'. Otherwise, set 'onChange' or 'readOnly'.`,\n    );\n\n    // Don't re-warn\n    warnControlledUsage<IProps>({ ...params, props: { value: 'test' } });\n    expect(warningCallback).toHaveBeenCalledTimes(1);\n  });\n\n  it('warns if controlled and onChange is not provided (right message for component without readOnly)', () => {\n    const { readOnlyProp, ...otherParams } = params;\n    warnControlledUsage<IProps>({ ...otherParams, props: { value: 'test' } });\n    expect(warningCallback).toHaveBeenCalledTimes(1);\n    expect(warningCallback).toHaveBeenLastCalledWith(\n      `Warning: You provided a 'value' prop to a TestComponent without an 'onChange' handler. This will render a ` +\n        `read-only field. If the field should be mutable use 'defaultValue'. Otherwise, set 'onChange'.`,\n    );\n\n    // Don't re-warn\n    warnControlledUsage<IProps>({ ...otherParams, props: { value: 'test' } });\n    expect(warningCallback).toHaveBeenCalledTimes(1);\n  });\n\n  it('re-warns when componentId changes for controlled without onChange', () => {\n    warnControlledUsage<IProps>({ ...params, props: { value: 'test' } });\n    expect(warningCallback).toHaveBeenCalledTimes(1);\n\n    warnControlledUsage<IProps>({ ...params, componentId: 'TestComponent2', props: { value: 'test' } });\n    expect(warningCallback).toHaveBeenCalledTimes(2);\n  });\n\n  it('warns if controlled and readOnly is false', () => {\n    warnControlledUsage<IProps>({ ...params, props: { value: 'test', readOnly: false } });\n    expect(warningCallback).toHaveBeenCalledTimes(1);\n    expect(warningCallback).toHaveBeenLastCalledWith(\n      `Warning: You provided a 'value' prop to a TestComponent without an 'onChange' handler. This will render a ` +\n        `read-only field. If the field should be mutable use 'defaultValue'. Otherwise, set 'onChange' or 'readOnly'.`,\n    );\n\n    // Don't re-warn\n    warnControlledUsage<IProps>({ ...params, props: { value: 'test', readOnly: false } });\n    expect(warningCallback).toHaveBeenCalledTimes(1);\n  });\n\n  it('warns if both value and defaultValue are provided', () => {\n    warnControlledUsage<IProps>({ ...params, props: { value: 'hello', defaultValue: 'world', onChange: noOp } });\n    expect(warningCallback).toHaveBeenCalledTimes(1);\n    expect(warningCallback).toHaveBeenLastCalledWith(\n      `Warning: You provided both 'value' and 'defaultValue' to a TestComponent. Form fields must be either ` +\n        `controlled or uncontrolled (specify either the 'value' prop, or the 'defaultValue' prop, but not both). ` +\n        `Decide between using a controlled or uncontrolled TestComponent and remove one of these props. ` +\n        `More info: https://fb.me/react-controlled-components`,\n    );\n\n    // Don't re-warn\n    warnControlledUsage<IProps>({ ...params, props: { value: 'hello', defaultValue: 'world', onChange: noOp } });\n    expect(warningCallback).toHaveBeenCalledTimes(1);\n  });\n\n  it('re-warns when componentId changes if both value and defaultValue are provided', () => {\n    warnControlledUsage<IProps>({ ...params, props: { value: 'hello', defaultValue: 'world', onChange: noOp } });\n    expect(warningCallback).toHaveBeenCalledTimes(1);\n\n    warnControlledUsage<IProps>({\n      ...params,\n      componentId: 'TestComponent2',\n      props: { value: 'hello', defaultValue: 'world', onChange: noOp },\n    });\n    expect(warningCallback).toHaveBeenCalledTimes(2);\n  });\n\n  it('does not warn if old and new are uncontrolled', () => {\n    warnControlledUsage<IProps>({ ...params, oldProps: { defaultValue: 'test' }, props: { defaultValue: 'test' } });\n    expect(warningCallback).toHaveBeenCalledTimes(0);\n\n    warnControlledUsage<IProps>({ ...params, props: {}, oldProps: {} });\n    expect(warningCallback).toHaveBeenCalledTimes(0);\n  });\n\n  it('does not warn if old and new are controlled', () => {\n    warnControlledUsage<IProps>({\n      ...params,\n      oldProps: { value: 'world', onChange: noOp },\n      props: { value: 'test', onChange: noOp },\n    });\n    expect(warningCallback).toHaveBeenCalledTimes(0);\n  });\n\n  it('warns if old is implicitly uncontrolled and new is controlled', () => {\n    warnControlledUsage<IProps>({ ...params, oldProps: {}, props: { value: 'test', onChange: noOp } });\n    expect(warningCallback).toHaveBeenCalledTimes(1);\n    expect(warningCallback).toHaveBeenLastCalledWith(\n      `Warning: A component is changing an uncontrolled TestComponent to be controlled. TestComponents should not ` +\n        `switch from controlled to uncontrolled (or vice versa). Decide between using controlled or uncontrolled ` +\n        `for the lifetime of the component. More info: https://fb.me/react-controlled-components`,\n    );\n\n    // Don't re-warn\n    warnControlledUsage<IProps>({ ...params, oldProps: {}, props: { value: 'test', onChange: noOp } });\n    expect(warningCallback).toHaveBeenCalledTimes(1);\n  });\n\n  it('warns if old is uncontrolled and new is controlled', () => {\n    warnControlledUsage<IProps>({ ...params, oldProps: {}, props: { value: 'test', onChange: noOp } });\n    expect(warningCallback).toHaveBeenCalledTimes(1);\n    expect(warningCallback).toHaveBeenLastCalledWith(\n      `Warning: A component is changing an uncontrolled TestComponent to be controlled. TestComponents should not ` +\n        `switch from controlled to uncontrolled (or vice versa). Decide between using controlled or uncontrolled ` +\n        `for the lifetime of the component. More info: https://fb.me/react-controlled-components`,\n    );\n  });\n\n  it('re-warns when componentId changes if old is uncontrolled and new is controlled', () => {\n    warnControlledUsage<IProps>({ ...params, oldProps: {}, props: { value: 'test', onChange: noOp } });\n    expect(warningCallback).toHaveBeenCalledTimes(1);\n\n    warnControlledUsage<IProps>({\n      ...params,\n      componentId: 'TestComponent2',\n      oldProps: {},\n      props: { value: 'test', onChange: noOp },\n    });\n    expect(warningCallback).toHaveBeenCalledTimes(2);\n  });\n\n  it('warns if old is controlled and new is implicitly uncontrolled', () => {\n    warnControlledUsage<IProps>({ ...params, oldProps: { value: 'test', onChange: noOp }, props: {} });\n    expect(warningCallback).toHaveBeenCalledTimes(1);\n    expect(warningCallback).toHaveBeenLastCalledWith(\n      `Warning: A component is changing a controlled TestComponent to be uncontrolled. TestComponents should not ` +\n        `switch from controlled to uncontrolled (or vice versa). Decide between using controlled or uncontrolled ` +\n        `for the lifetime of the component. More info: https://fb.me/react-controlled-components`,\n    );\n\n    // Don't re-warn\n    warnControlledUsage<IProps>({ ...params, oldProps: { value: 'test', onChange: noOp }, props: {} });\n    expect(warningCallback).toHaveBeenCalledTimes(1);\n  });\n\n  it('warns if old is controlled and new is uncontrolled', () => {\n    warnControlledUsage<IProps>({\n      ...params,\n      oldProps: { value: 'hello', onChange: noOp },\n      props: { defaultValue: 'world' },\n    });\n    expect(warningCallback).toHaveBeenCalledTimes(1);\n    expect(warningCallback).toHaveBeenLastCalledWith(\n      `Warning: A component is changing a controlled TestComponent to be uncontrolled. TestComponents should not ` +\n        `switch from controlled to uncontrolled (or vice versa). Decide between using controlled or uncontrolled ` +\n        `for the lifetime of the component. More info: https://fb.me/react-controlled-components`,\n    );\n\n    // Don't re-warn\n    warnControlledUsage<IProps>({\n      ...params,\n      oldProps: { value: 'hello', onChange: noOp },\n      props: { defaultValue: 'world' },\n    });\n    expect(warningCallback).toHaveBeenCalledTimes(1);\n  });\n\n  it('re-warns when componentId changes if old is controlled and new is implicitly uncontrolled', () => {\n    warnControlledUsage<IProps>({ ...params, oldProps: { value: 'test', onChange: noOp }, props: {} });\n    expect(warningCallback).toHaveBeenCalledTimes(1);\n\n    warnControlledUsage<IProps>({\n      ...params,\n      componentId: 'TestComponent2',\n      oldProps: { value: 'test', onChange: noOp },\n      props: {},\n    });\n    expect(warningCallback).toHaveBeenCalledTimes(2);\n  });\n});\n"]}